---

---
import Callout from '@choco-astro/components/Callout.astro';
import Xref from '@components/Xref.astro';
import TabsPane from '@choco-astro/components/tabs/TabsPane.astro';
import TabsPaneContainer from '@choco-astro/components/tabs/TabsPaneContainer.astro';
import TabsTabContainer from '@choco-astro/components/tabs/TabsTabContainer.astro';
import CentralManagementSecureConnectionStrings from '@components/docs/CentralManagementSecureConnectionStrings.mdx';
import CentralManagementDatabaseSetup from '@components/docs/CentralManagementDatabaseSetup.mdx';
import CentralManagementWebsiteSetup from '@components/docs/CentralManagementWebsiteSetup.mdx';
import CentralManagementServiceSetup from '@components/docs/CentralManagementServiceSetup.mdx';
import OrgGuideCcmDatabase from '@components/docs/OrgGuideCcmDatabase.mdx';
import OrgGuideCcmWeb from '@components/docs/OrgGuideCcmWeb.mdx';
import OrgGuideCcmService from '@components/docs/OrgGuideCcmService.mdx';
import OrgGuideCentralManagementIntro from '@components/docs/OrgGuideCentralManagementIntro.mdx'
import DynamicCodeBlockInput from '@choco-astro/components/dynamicCodeBlock/DynamicCodeBlockInput.astro';
import DynamicCodeBlock from '@choco-astro/components/dynamicCodeBlock/DynamicCodeBlock.astro';
export const ccmInstall = [
    { id: 'ccm-database', title: 'Chocolatey Cental Management Database', isActive: true },
    { id: 'ccm-service', title: 'Chocolatey Central Management Service', updateAnchor: true },
    { id: 'ccm-web', title: 'Chocolatey Central Management Website', updateAnchor: true }
];

<OrgGuideCentralManagementIntro />

### Requirements

To install and run Chocolatey Central Management, your server(s) must meet the following requirements:

- Windows Server 2022 or later.
- 4 CPU cores
- 16 GB RAM
- 100 GB+ of drive space for computer information and deployment messages processed by the Chocolatey Central Management Service.

### Planning Your Installation

Chocolatey Central Management can be installed on a single server or each component can be installed on separate servers. **All three components are required for a Chocolatey Central Management installation.**

If you have Chocolatey for Business licenses for more than 1,000 endpoints, we recommended installing the components on separate servers.
For 1,000 licenses or fewer, you can install all components on a single server, though we still recommend using a licensed version of SQL Server for the database component.

<Callout type="warning" title="Before You Begin">

Before you can install the Chocolatey Central Management Database, you need to have a SQL Server Instance available. SQL Server Express is only recommended for testing and small environments (fewer than 1,000 endpoints).
</Callout>

### Environment Information

| Variable | Value | Usage |
| -------- | ----- | ----- |
| Component | `Database`, `Service`, `Website` | The component(s) of Chocolatey Central Management to install on the current server. |
| ServiceCredential | Varies | The credentials to use with the Chocolatey Management Service. If the account does not exist, it will be created. The user must have `Log on as a service` privilege. (Service and Web components only) |
| ConnectionString | Varies | The connection string used to connect to the SQL database. |
| IsOffline | True | If true, you will be required to provide the path to the zip file containing the internalized Chocolatey components required for installation. |
| OfflineInstallationMedia | Varies | The path to the zip file containing the internalized Chocolatey components required for installation. This is only required if `IsOffline` is true. |
| CertificateDnsName | <DynamicCodeBlockInput name="SslCertificateDnsName" defaultValue="Fabrikam.com" /> | The DNS name to use for the Chocolatey Management Service if using a wildcard certificate. (Service and Web components only) |
| Thumbprint | <DynamicCodeBlockInput name="SslCertificateThumbprint" defaultValue="1234567890" /> | The thumbprint of the certificate to use for the Chocolatey Management Service. (Service and Web components only) |

### Securing Chocolatey Central Management Communications

By default, the install will create and use self-signed certificates for the Chocolatey Management Service and Web components.
If you wish to use your own certificates, you can do so by providing the `Thumbprint` and `CertificateDnsName` parameters.

<details>
<summary><strong>You must install the certificate to the Local Machine \ Trusted People store when providing the Thumbprint. (click to expand)</strong></summary>
<ul class="list-style-type-disc">
<li>Once you have your SSL certificate in a locatable directory, type `certlm.msc` in the Search bar of the Chocolatey server to open the Microsoft Management Console for Certificates on the local machine.</li>
<li>Right-click the `Trusted People` store and select `All Tasks > Import...`. This will open the Certificate Import Wizard.</li>
<li>Select `Next`, then browse to the location of the SSL certificate you want to use.</li>
<li>Once you select the certificate, click `Next`.</li>
<li>Input the password for the certificate and check the box that says `Mark this key as exportable. This will allow you to back up and transport your keys at a later time.` Click `Next`.</li>
<li>The `Trusted People` certificate store should already be input in the `Browse...` bar. Select `Next`.</li>
<li>Verify the information in the pane and then select `Finish`.</li>
</ul>
</details>

### Chocolatey Central Management Component Installation Scripts

<TabsTabContainer content={ccmInstall} />
<TabsPaneContainer>
    <TabsPane content={ccmInstall[0]}>
        <OrgGuideCcmDatabase />
        <Xref title="Back To Top" value="setup-central-management"/>
    </TabsPane>
    <TabsPane content={ccmInstall[1]}>
        <OrgGuideCcmService />
        <Xref title="Back To Top" value="setup-central-management"/>
    </TabsPane>
    <TabsPane content={ccmInstall[2]}>
        <OrgGuideCcmWeb />
        <Xref title="Back To Top" value="setup-central-management"/>
    </TabsPane>
</TabsPaneContainer>